---
title: '更新'
description: 'Next.js Supabase Turboスターターキットを最新バージョンに更新する方法を学びます'
icon: 'refresh-cw'
order: 7
---

# Next.js Supabase Turboスターターキットの更新

Next.js Supabase Turboスターターキットを最新バージョンに更新する方法を学びます。

🚀 プロジェクトを最先端に保つ準備はできていますか？

このガイドでは、GitHubリポジトリから最新の変更を取得し、それらをプロジェクトにマージすることでコードベースを更新するプロセスを説明します。これにより、常に最新の機能とバグ修正を利用できるようになります。

前回のガイドに従っていれば、すでにプロジェクト用のGitリポジトリが設定され、元のリポジトリを指すupstreamリモートが設定されているはずです。

プロジェクトの更新には、upstreamリモートから最新の変更を取得し、それらをプロジェクトにマージすることが含まれます。それでは、手順を見ていきましょう！

## 0. 変更の退避（スタッシュ）

コミットされていない変更がある場合、プロジェクトを更新する前に、更新プロセス中の競合を避けるために変更を退避（スタッシュ）することをお勧めします。以下のコマンドを実行して変更を退避できます：

```bash
git stash
```

これにより変更が一時的に保存され、競合なしにプロジェクトを更新できます。プロジェクトを更新した後、以下のコマンドを実行して変更を戻すことができます：

```bash
git stash pop
```

退避する変更がない場合は、このステップをスキップして更新プロセスに進むことができます。🛅

あるいは、変更をコミットすることもできます。

## 1. upstreamリモートの更新

最初のステップは、upstreamリモートから最新の変更を取得することです。以下のコマンドを実行してこれを行うことができます：

```bash
git pull upstream main
```

初めて実行する際に確認を求められたら、リベースではなくマージを選択してください。

依存関係に更新がある場合に備えて、`pnpm i`を実行することを忘れないでください。🔄

## 2. 競合の解決

マージ中に競合が発生しましたか？心配いりません！手動で解決する必要があります。Gitは競合のあるファイルを強調表示し、それらを編集して問題を解決できます。

### 2.1 ロックファイル「pnpm-lock.yaml」の競合

pnpm-lock.yamlファイルに競合がある場合は、2つの変更のいずれかを受け入れ（手動編集は避けてください）、次に以下を実行します：

```bash
pnpm i
```

これで、ロックファイルはあなたの変更とupstreamリポジトリからの更新の両方を反映します。🎉

### 2.2 DB型「database.types.ts」の競合

あなたの型はupstreamリポジトリのものと異なる可能性があるため、それらを再構築する必要があります。これを行うには、DBをリセットします：

```bash
npm run supabase:web:reset
```

次に、以下のコマンドで型を再生成します：

```bash
npm run supabase:web:typegen
```

これで、型はupstreamリポジトリとあなたのプロジェクトの両方からの変更を反映します。🚀

## 競合解決後のプロジェクトヘルスチェック

競合を解決した後、すべてが期待通りに動作していることを確認するためにプロジェクトをテストする時間です。プロジェクトをローカルで実行し、様々な機能をナビゲートして、すべてが正しく機能していることを確認します。

簡単なヘルスチェックには以下のコマンドを実行できます：

```bash
pnpm run typecheck
```

そして、コードをリントします：

```bash
pnpm run lint
```

すべてが良好に見えれば、準備完了です！これで、プロジェクトはupstreamリポジトリからの最新の変更で更新されました。🎉

## 変更のコミットとプッシュ

すべてが正常に動作していることを確認したら、`git commit -m "COMMIT_MESSAGE"`で変更をコミットし、`git push origin BRANCH_NAME`でリモートリポジトリにプッシュすることを忘れないでください。

もちろん、COMMIT_MESSAGEとBRANCH_NAMEを実際のコミットメッセージとブランチ名に置き換えてください。🚀
